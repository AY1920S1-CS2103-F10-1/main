=== Implementation

==== Jackson Library

The current import and export features are built upon the the existing `Jackson` libraries,
in particular the `dataformat`, `databind` and `datatype` modules. Technical knowledge of the
`Jackson` library will be helpful for maintenance of feature, but is not necessary.

However, understanding `Jackson` 's `annotations` will be needed in order to extend export and import
functionality to cover new data fields or classes implemented in the future. They are explained here.

==== Csv Processing

All of the data processing needed for this feature can be found in the `CsvUtil` file;
it is responsible for converting the data of `Person` objects into a .csv friendly `String` format
and vice versa. The actual reading and writing of .csv files is then done with existing
`FileUtil` functionality.

The conversion of `Person` objects to and from .csv formatted `Strings` are handled by
the `CsvMapper` and `CsvSchema` classes implemented in `dataformat`.

* The `CsvMapper` is responsible for managing custom configurations for the conversions.
For instance, it can toggle headers with `withHeader()` and skip unknown fields with the
`IGNORE_UNKNOWN` feature, both of which are used in the feature implementation.
* The `CsvSchema` object is created by a configured `CsvMapper` object and an `Object.class`,
in this case, `Person.class`. It dictates the scheme for how data in each column of the .csv
corresponds with the fields in the Object class. This schema can then be used to instantiate
a reader or a writer object.

The following functions are implemented:

1. Write a list of `Person` objects into a .csv file with specified `exportFileName`.
If successful, return the path of the written file.
2. Read a .csv file with specified `importFileName` and return a corresponding list of
`Person` objects.

==== Command Implementation

===== Export

The `export` command works by retrieving a list of `Person` objects from the `Model` and passing
it to `CsvUtil` to process and write into a .csv file. If provided with indexes, the `export`
feature can selectively export the `Person` objects that correspond to the specified indexes.
To facilitate the selective export functionality, the following methods were implemented in
`Model` and `AddressBook`.

* `Model#GetPersonsByIndexes(Set<Indexes>)` -- Retrieves and returns a list of `Person` objects
corresponding to the provided indexes from the `AddressBook` , if the indexes are valid.
* `AddressBook#GetPersonByIndex(Index)` -- Returns the `Person` object corresponding
to the specified index, if the index is valid.

If indexes are not specified in the command arguments, a list of all currently existing `Person`
objects will be retrieved with `Model#getStagedPersonList()`.

The `export` command MUST be provided with a desired file name for the .csv file. The .csv
file will be written to `/exports/filename.csv`. Existing files will NOT be overridden and
thus the provided file name cannot already exist in `/exports`.

The following diagram shows how an export command works:

image::./ExportSequenceDiagram.png[]

===== Import